# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

---
# 🚀 1단계 - 즐겨찾기 기능 완성

## 기능 요구사항
- [x] 멤버 개인의 출발역, 도착역 즐겨찾기 기능 완성
  - [x] 즐겨찾기 생성
  ```
    - when 회원이 출발역과 도착역 정보로 즐겨찾기를 생성하면
    - then 201 Created 코드로 응답받는다.
  ```
  - [x] 즐겨찾기 조회
  ```
    - given 회원이 출발역과 도착역 정보로 즐겨찾기를 생성하고
    - when 회원의 즐겨찾기 목록을 조회하면
    - then 해당 즐겨찾기가 포함되어 있다.
  ```
  - [x] 즐겨찾기 삭제
  ```
    - given 회원이 출발역과 도착역 정보로 즐겨찾기를 생성하고
    - when 해당 즐겨찾기를 삭제하면
    - then 즐겨찾기 목록 조회 시 해당 즐겨찾기가 포함되지 않는다.
  ```
- [x] 예외 케이스 검증 포함
  - [x] 로그인이 필요한 API 요청 시 유효하지 않은 경우
    - 인수 테스트로 진행
  - [x] 존재하지 않는 경로를 즐겨찾기로 추가하는 경우
    - Favorite 객체 생성 시에 validate 수행 
    - service 레이어 테스트를 진행하면 실제 동작처럼 테스트 해볼 수 있으나, 예외 발생이 도메인 내에서 일어나기에 도메인 레이어에서 테스트를 진행
  - [x] 존재하지 않는 즐겨찾기를 삭제하는 경우
    - JPA 메서드에 의존하는 예외 처리에 대한 고민

## 프로그래밍 요구사항
- [x] 인수테스트 주도 개발 프로세스에 맞춰서 기능 구현
  - 인수 조건 정의 > 인수 조건 검증 인수 테스트 작성 > 인수 테스트 충족 기능 구현
- [x] 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성
- [x] 인수 테스트 이후 기능 구현은 __TDD로 진행__
- [x] Favorite 객체와 Member, Station 객체 간 직접참조 vs 간접참조 고민
  - 직접 참조 시 > 객체 탐색이 편하지만, 연관 관계가 복잡해지고 객체 오용 가능성 Up
  - 간접 참조 시 > 엔티티 간의 결합도 감소, 로딩 설정의 복잡도 감소
  - 기준 : 라이프 사이클 공유하는가? / 도메인 제약사항을 공유하는가? /  되도록이면 간접 참조
  - 첫 설계 시 전부 간접 참조로 구성, 구현을 진행하며 개선 예정

## Feedback 24.02.22

- [x] 사용되지 않는 클래스 삭제
- [x] 뼈대 코드의 완료한 Todo 삭제
- [x] Favorite의 경로 연결 여부를 별도 메서드로 분리해보기
- Repository의 delete 시 findById 이후 error코드로 응답도 가능
  - throw Exception이 반복된다면, Respository에 별도 메서드를 작성해주기도 함.
  <br>`public Member findByOrElseThrow(String email){...}`
- Service 레이어 테스트에 대해
  - Service는 도메인 역할의 조합으로, 도에밍 테스트가 잘 구현되어 있다면 필수는 아님
  - but 서비수 구현 시 순서가 중요하거나, 특정 케이스로 서비스 내에서만 다뤄질 때 사용
  - 결론적으로, 요구사항의 흐름을 테스트할 때 사용!

---
# 🚀 2단계 - 깃헙 로그인 구현
## 기능 요구사항
- [x] 깃허브를 이용한 로그인 구현(토큰 발행)
  - [x] 깃허브 토큰 요청 테스트
  - [x] 깃허브 유저 프로필 요청 테스트
  - [x] 서버 내 사용자 조회 및 액세스 토큰 발급
- [x] 가입이 되어있지 않은 경우 회원 가입으로 진행 후 토큰 발행

## 프로그래밍 요구사항
- [x] 깃허브 로그인을 검증할 수 있는 인수 테스트 구현(실제 GitHub에 요청을 하지 않아도 됨)

## Feedback 24.02.27

- [x] 사용하는 Java 객체의 nullable을 Optional로 표현해보기
- [x] RestAssured 코드의 공통된 부분을 분리해보기

---
# 🚀 3단계 - 패키지 리팩터링

## 요구사항
- [ ] 작성한 인수 테스트를 기반으로 리팩터링 진행

## 프로그래밍 요구사항
- [ ] 인증 관련 부분을 다른 프로젝트에서 재사용 할 수 있도록 리팩터링
  - [x] 일반 로그인 로직과 github 로그인 로직에 대해 추상화 및 중복 코드 제거
  - [x] 패키지 사이의 상호 참조를 없애기
